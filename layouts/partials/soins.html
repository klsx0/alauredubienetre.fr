<section class="section has-text-centered">
  <h1 class="title">Principaux soins</h1>
  <h2 class="subtitle">De véritables soins personnalisés conçus pour votre bien-être</h2>

  <div class="columns is-multiline is-variable is-5">
    {{ range where .Site.RegularPages "Params.highlighted" true }}
      <div class="column is-one-third-desktop is-half-tablet is-full-mobile">
        <a href="/soins/#{{ .Title | urlize }}">
          <div class="card highlighted" tabindex="0">
            {{/* ==== IMAGES RESPONSIVES (AVIF + WebP) ==== */}}
            {{ $imagePath := printf "images/%s" .Params.pic }}
            {{ $src := resources.Get $imagePath }}
            <div class="card-image">
              <figure class="image is-3by2 article">
                {{ if $src }}
                  {{ $avif360 := $src.Fit "360x240 avif" }}
                  {{ $avif720 := $src.Fit "720x480 avif" }}
                  {{ $webp360 := $src.Fit "360x240 webp" }}
                  {{ $webp720 := $src.Fit "720x480 webp" }}
                  <picture>
                    <source type="image/avif"
                      srcset="{{ $avif360.RelPermalink }} 360w, {{ $avif720.RelPermalink }} 720w"
                      sizes="(min-width: 1024px) 33vw, (min-width: 769px) 50vw, 100vw">
                    <source type="image/webp"
                      srcset="{{ $webp360.RelPermalink }} 360w, {{ $webp720.RelPermalink }} 720w"
                      sizes="(min-width: 1024px) 33vw, (min-width: 769px) 50vw, 100vw">
                    <img
                      class="image-block has-ratio"
                      src="{{ $webp360.RelPermalink }}"
                      alt="{{ with .Params.alt }}{{ . }}{{ else }}{{ .Title }} à Villeneuve-sur-Lot{{ end }}"
                      loading="lazy"
                      decoding="async"
                      width="{{ $webp720.Width }}"
                      height="{{ $webp720.Height }}">
                  </picture>
                {{ else }}
                  {{/* fallback si l'image est servie depuis /static */}}
                  <img
                    class="image-block has-ratio"
                    src="{{ printf "/%s" .Params.pic | relURL }}"
                    alt="{{ with .Params.alt }}{{ . }}{{ else }}{{ .Title }} à Villeneuve-sur-Lot{{ end }}"
                    loading="lazy"
                    decoding="async">
                {{ end }}
              </figure>
            </div>
            {{/* ==== /IMAGES ==== */}}

            <div class="card-content">
              <div class="media">
                <div class="media-content">
                  <p class="title is-4"><b>{{ .Title }}</b></p>
                  <p class="subtitle is-6">{{ with .Params.description }}{{ . }}{{ end }}</p>

                  <div class="chips-container is-flex is-align-items-center is-flex-wrap-wrap" style="gap:.5rem;">
                    {{ with .Params.duration }}<span class="duration-chip">⏱ {{ . }}</span>{{ end }}
                    {{ with .Params.price }}<span class="price-chip">{{ . }} €</span>{{ end }}
                  </div>
                </div>
              </div>
            </div>
          </div>
        </a>
      </div>
    {{ end }}
  </div>

  <section class="section has-text-centered" style="padding-top:0;">
    <a class="button is-text" href="/soins">Tous les soins &amp; tarifs</a>
  </section>
</section>
