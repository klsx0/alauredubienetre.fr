<section class="hero is-link is-fullheight-with-navbar my-hero-bg">

  {{/* Cherche l'image source dans assets/images/ */}}
  {{ $src := resources.Get "images/bg-hero.jpg" }}
  {{ if not $src }}{{ $src = resources.Get "images/bg-hero.png" }}{{ end }}

  {{ if $src }}
    {{/* Génération AVIF & WebP avec tailles responsive (3:2) */}}
    {{ $avif480  := $src.Fit "480x320 avif" }}
    {{ $avif768  := $src.Fit "768x512 avif" }}
    {{ $avif1280 := $src.Fit "1280x853 avif" }}
    {{ $avif1536 := $src.Fit "1536x1024 avif" }}
    {{ $webp480  := $src.Fit "480x320 webp" }}
    {{ $webp768  := $src.Fit "768x512 webp" }}
    {{ $webp1280 := $src.Fit "1280x853 webp" }}
    {{ $webp1536 := $src.Fit "1536x1024 webp" }}

    <!-- Preload + priorité haute pour LCP -->
    <link rel="preload" as="image"
          href="{{ $webp768.RelPermalink }}"
          imagesrcset="{{ $avif480.RelPermalink }} 480w, {{ $avif768.RelPermalink }} 768w, {{ $avif1280.RelPermalink }} 1280w, {{ $avif1536.RelPermalink }} 1536w"
          imagesizes="100vw"
          fetchpriority="high">

    <div class="hero-bg-wrap" aria-hidden="true">
      <picture>
        <source type="image/avif"
                srcset="{{ $avif480.RelPermalink }} 480w, {{ $avif768.RelPermalink }} 768w, {{ $avif1280.RelPermalink }} 1280w, {{ $avif1536.RelPermalink }} 1536w"
                sizes="100vw">
        <source type="image/webp"
                srcset="{{ $webp480.RelPermalink }} 480w, {{ $webp768.RelPermalink }} 768w, {{ $webp1280.RelPermalink }} 1280w, {{ $webp1536.RelPermalink }} 1536w"
                sizes="100vw">
        <img class="hero-bg-img"
             src="{{ $webp768.RelPermalink }}"
             alt=""
             width="{{ $webp1536.Width }}"
             height="{{ $webp1536.Height }}"
             decoding="async"
             fetchpriority="high">
      </picture>
    </div>

  {{ else }}
    <!-- Fallback si aucune image dans assets/ -->
    <div class="hero-bg-wrap" aria-hidden="true">
      <img class="hero-bg-img" src="/bg-hero.webp" alt="" decoding="async" fetchpriority="high">
    </div>
  {{ end }}

  <div class="hero-body">
    <div class="container">
      <!-- Carte de contenu pour lisibilité -->
      <div class="hero-content-card">
        <p class="title"><b>{{ .Title }}</b></p>
        <p class="subtitle">
          <i>Votre espace de massage et de bien-être à Villeneuve-sur-Lot,<br class="is-hidden-mobile"> où chaque soin est une invitation à un voyage sensoriel.</i>
        </p>
        <div class="buttons is-flex is-align-items-center is-flex-wrap-wrap is-mobile-stack">
          <a class="button is-primary is-rounded" href="/#contact">Contact</a>
          <a class="button is-primary is-rounded is-outlined" href="/soins">Nos Massages</a>
        </div>
      </div>
    </div>
  </div>
</section>
